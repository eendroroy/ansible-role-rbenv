---
- name: Check for previous installation of rbenv-default-gems
  stat:
    path: '{{ rbenv_default_gems.path }}'
  ignore_errors: true
  register: rbenv_default_gems_dir

- block:
  - name: Clone rbenv-default-gems
    git:
      repo: '{{ rbenv_default_gems.url }}'
      dest: '{{ rbenv_default_gems.path }}'

  - name: Create default gems list
    copy:
      src: files/default-gems
      dest: '{{ rbenv_path }}/default-gems'

  when: rbenv_default_gems_dir.stat.exists == false

